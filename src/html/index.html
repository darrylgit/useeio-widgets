<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Impact chart example</title>
    <style>
        body {
            font-family: sans-serif;
            font-size: 0.9em;
        }
        #sector-list {
            height: 500px; 
            overflow-y: scroll;
            border: lightgray solid 1px;
        }
    </style>
</head>

<body>
    <div style="margin: 25px;">

        <div style="float: left; width: 40%;">
            <h4 style="text-align: center;">Sectors</h4>
            <div id="sector-list">
            </div>
        </div>

        <div style="float: left; width: 60%">
            <h4 style="text-align: center;">Indicator results</h4>
            <div id="impact-chart">
            </div>
        </div>


        <div id="filter"></div>

    </div>
</body>
<script src="lib/d3.min.js"></script>
<script src="lib/HashConfigTransmitter.js"></script>
<script src="lib/SectorList.js"></script>
<script src="lib/ImpactChart.js"></script>
<script src="lib/FilterWidget.js"></script>
<script>

    var apiConfig = {
        endpoint: '/api',
        model: 'USEEIOv1.2',
    };
    var config = useeio.HashConfigTransmitter.create();

    var sectorList = useeio.SectorList.on({
        ...apiConfig,
        selector: '#sector-list',
    });

    var chart = useeio.ImpactChart.on({
        ...apiConfig,
        selector: '#impact-chart',
    });
    chart.update({
        sectors: ['1111A0', '111200', '111400', '112120']
    });

    sectorList.onSelectionChanged((codes) => {
        chart.update({sectors: codes});
    });

    var filter = useeio.FilterWidget.on('#filter');

    config.onChanged(function (conf) {
        chart.update(conf);
        filter.update(conf);
    });
</script>

</html>